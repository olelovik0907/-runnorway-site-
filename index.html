<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RunNorway – Løp i hele Norge</title>

  <meta name="theme-color" content="#116D6B" />
  <link rel="icon" href="assets/logo-32.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/logo-180.png" />

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    :root {
      --brand: #116D6B;       /* grønn fra logo */
      --accent: #F3C316;      /* gul aksent */
      --ink: #0d1b1e;
    }
    html, body {
      background: #fff;
      color: var(--ink);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .btn-accent { background: var(--accent); color:#0b1516; }
    .btn-accent:hover { background:#d6aa10; }
    .btn-ghost { background: rgba(255,255,255,.9); color: var(--brand); }
    .btn-ghost:hover { background:#fff; }
    .stat { background: #f7faf9; border:1px solid #e6efed; border-radius:16px; }
    .card { background:#fff; border:1px solid #e9eef3; border-radius:16px; }
    .brand-grad { background: linear-gradient(90deg, #0f5f5c, #116D6B 40%, #12988f); }
    .sponsors-row { display:flex; gap:32px; align-items:center; animation: scrollx 20s linear infinite; }
    .sponsors-mask { mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent); -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent); overflow:hidden; }
    @keyframes scrollx { from{transform: translateX(0);} to{transform: translateX(-50%);} }
    details[open] summary svg { transform: rotate(180deg); }
  </style>
</head>

<body class="antialiased">
  <!-- TOPP -->
  <header class="sticky top-0 z-50 bg-white/90 backdrop-blur border-b">
    <div class="max-w-7xl mx-auto h-16 px-4 flex items-center justify-between">
      <a href="#" class="flex items-center gap-2 font-bold text-xl text-[var(--brand)]">
        <img src="assets/logo-48.png" class="h-8 w-auto" alt="RunNorway" />
        RunNorway
      </a>
      <nav class="hidden md:flex items-center gap-8 font-semibold text-[var(--brand)]">
        <a href="#race">Hovedløp</a>
        <a href="#program">Program</a>
        <a href="#kart">Løype</a>
        <a href="#sponsorer">Sponsorer</a>
        <a href="#nytt">Nytt</a>
        <a href="#faq">FAQ</a>
      </nav>
      <a href="admin.html" class="hidden sm:inline-block btn-accent px-4 py-2 rounded-full font-semibold">Legg inn løp</a>
    </div>
  </header>

  <!-- HERO med bilde, nedtelling og CTA -->
  <section id="race" class="relative">
    <div class="h-[58vh] sm:h-[78vh] w-full bg-cover bg-center"
         style="background-image:url('assets/L%C3%B8per%20langs%20Atlanterhavsveien.png');"></div>
    <div class="absolute inset-0 bg-black/35"></div>
    <div class="absolute inset-0 flex items-center">
      <div class="max-w-7xl mx-auto px-4 text-white">
        <div class="max-w-2xl">
          <img src="assets/logo-192.png" alt="" class="h-16 mb-6 opacity-95" />
          <h1 class="text-4xl sm:text-6xl font-extrabold leading-tight">Løp i hele Norge. Ett sted.</h1>
          <p class="mt-3 text-lg sm:text-xl text-white/90">
            Finn ditt neste løp, se værmelding og løype, meld deg på – alt samlet.
          </p>
          <div class="mt-6 flex flex-wrap gap-3">
            <a href="#program" class="btn-accent px-6 py-3 rounded-full font-semibold">Se program</a>
            <a href="admin.html" class="btn-ghost px-6 py-3 rounded-full font-semibold">Legg inn ditt løp</a>
          </div>
        </div>

        <!-- Nedtelling i hoved-hero-stil -->
        <div class="mt-10 grid grid-cols-4 gap-3 w-fit text-center">
          <div class="stat px-4 py-3 min-w-[84px]">
            <div id="d" class="text-3xl font-extrabold">0</div>
            <div class="text-xs uppercase tracking-wide text-black/70">Dager</div>
          </div>
          <div class="stat px-4 py-3 min-w-[84px]">
            <div id="h" class="text-3xl font-extrabold">0</div>
            <div class="text-xs uppercase tracking-wide text-black/70">Timer</div>
          </div>
          <div class="stat px-4 py-3 min-w-[84px]">
            <div id="m" class="text-3xl font-extrabold">0</div>
            <div class="text-xs uppercase tracking-wide text-black/70">Min</div>
          </div>
          <div class="stat px-4 py-3 min-w-[84px]">
            <div id="s" class="text-3xl font-extrabold">0</div>
            <div class="text-xs uppercase tracking-wide text-black/70">Sek</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Stats-stripe -->
  <section class="py-8 brand-grad text-white">
    <div class="max-w-7xl mx-auto px-4 grid grid-cols-2 sm:grid-cols-4 gap-4 text-center">
      <div><div class="text-3xl font-extrabold">+1 200</div><div>Årlige løp</div></div>
      <div><div class="text-3xl font-extrabold">+300</div><div>Klubber</div></div>
      <div><div class="text-3xl font-extrabold">Alle</div><div>Fylker</div></div>
      <div><div class="text-3xl font-extrabold">1</div><div>Kalender</div></div>
    </div>
  </section>

  <!-- Programseksjon -->
  <section id="program" class="py-16 bg-slate-50">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex items-end justify-between flex-wrap gap-4">
        <h2 class="text-3xl sm:text-4xl font-bold text-[var(--brand)]">Program</h2>
        <a href="#nytt" class="text-[var(--brand)] font-semibold">Se nyheter</a>
      </div>

      <div id="eventsGrid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
        <!-- fylles av JS -->
      </div>

      <div class="mt-8 grid gap-6 sm:grid-cols-2">
        <!-- Vær-widget eksempel -->
        <div class="card p-0 overflow-hidden">
          <div class="p-4 border-b">
            <h3 class="text-xl font-bold text-[var(--brand)]">Værmelding – Oslo</h3>
          </div>
          <iframe src="https://www.pent.no/Oslo" width="100%" height="420" style="border:0;"></iframe>
        </div>
        <!-- Hurtigfiltre (demo) -->
        <div class="card">
          <h3 class="text-xl font-bold text-[var(--brand)]">Finn løp raskt</h3>
          <div class="mt-3 grid gap-3 sm:grid-cols-2">
            <input id="q" class="border rounded-xl px-3 py-2" placeholder="Søk navn/sted" />
            <select id="region" class="border rounded-xl px-3 py-2">
              <option value="">Region</option>
            </select>
          </div>
          <div class="mt-3">
            <button id="reset" class="px-4 py-2 rounded-full border font-semibold">Nullstill</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Kart og løype -->
  <section id="kart" class="py-16">
    <div class="max-w-7xl mx-auto px-4">
      <h2 class="text-3xl sm:text-4xl font-bold text-[var(--brand)]">Løype og plassering</h2>
      <p class="text-slate-600 mt-2">Zoom inn på kartet og klikk markører for å se løp.</p>
      <div id="map" class="h-[520px] rounded-2xl border mt-4"></div>
    </div>
  </section>

  <!-- Sponsorer -->
  <section id="sponsorer" class="py-14 bg-slate-50">
    <div class="max-w-7xl mx-auto px-4">
      <h2 class="text-3xl sm:text-4xl font-bold text-[var(--brand)]">Sponsorer</h2>
      <div class="sponsors-mask mt-6">
        <div class="sponsors-row">
          <img src="assets/s1.png" class="h-12 opacity-80" alt="Sponsor 1" />
          <img src="assets/s2.png" class="h-12 opacity-80" alt="Sponsor 2" />
          <img src="assets/s3.png" class="h-12 opacity-80" alt="Sponsor 3" />
          <img src="assets/s4.png" class="h-12 opacity-80" alt="Sponsor 4" />
          <!-- dupliser for kontinuerlig loop -->
          <img src="assets/s1.png" class="h-12 opacity-80" alt="Sponsor 1" />
          <img src="assets/s2.png" class="h-12 opacity-80" alt="Sponsor 2" />
          <img src="assets/s3.png" class="h-12 opacity-80" alt="Sponsor 3" />
          <img src="assets/s4.png" class="h-12 opacity-80" alt="Sponsor 4" />
        </div>
      </div>
    </div>
  </section>

  <!-- Nyheter -->
  <section id="nytt" class="py-16">
    <div class="max-w-7xl mx-auto px-4">
      <h2 class="text-3xl sm:text-4xl font-bold text-[var(--brand)]">Siste nytt</h2>
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6" id="newsGrid">
        <!-- fylles av JS -->
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="py-16 bg-slate-50">
    <div class="max-w-5xl mx-auto px-4">
      <h2 class="text-3xl sm:text-4xl font-bold text-[var(--brand)]">Ofte stilte spørsmål</h2>
      <div class="mt-6 grid gap-3">
        <details class="card p-0 overflow-hidden">
          <summary class="cursor-pointer list-none px-5 py-4 flex items-center justify-between">
            <span class="font-semibold text-[var(--brand)]">Hvordan legger jeg inn et løp?</span>
            <svg class="h-5 w-5 text-slate-500 transition-transform" viewBox="0 0 20 20" fill="currentColor"><path d="M5.23 7.21a.75.75 0 011.06.02L10 11.19l3.71-3.96a.75.75 0 111.08 1.04l-4.25 4.54a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"/></svg>
          </summary>
          <div class="px-5 pb-5 text-slate-700">Klikk “Legg inn løp” øverst. Fyll inn navn, sted, dato og lenke til påmelding.</div>
        </details>
        <details class="card p-0 overflow-hidden">
          <summary class="cursor-pointer list-none px-5 py-4 flex items-center justify-between">
            <span class="font-semibold text-[var(--brand)]">Hva koster det?</span>
            <svg class="h-5 w-5 text-slate-500 transition-transform" viewBox="0 0 20 20" fill="currentColor"><path d="M5.23 7.21a.75.75 0 011.06.02L10 11.19l3.71-3.96a.75.75 0 111.08 1.04l-4.25 4.54a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"/></svg>
          </summary>
          <div class="px-5 pb-5 text-slate-700">Gratis for gratisarrangement. For betalte løp: fast pris per betalt deltaker.</div>
        </details>
        <details class="card p-0 overflow-hidden">
          <summary class="cursor-pointer list-none px-5 py-4 flex items-center justify-between">
            <span class="font-semibold text-[var(--brand)]">Viser dere vær på løpssiden?</span>
            <svg class="h-5 w-5 text-slate-500 transition-transform" viewBox="0 0 20 20" fill="currentColor"><path d="M5.23 7.21a.75.75 0 011.06.02L10 11.19l3.71-3.96a.75.75 0 111.08 1.04l-4.25 4.54a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"/></svg>
          </summary>
          <div class="px-5 pb-5 text-slate-700">Ja. Vi henter vær fra Pent.no for stedet løpet går.</div>
        </details>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="py-10 border-t">
    <div class="max-w-7xl mx-auto px-4 text-sm text-slate-600 flex flex-wrap gap-3 justify-between">
      <p>© <span id="year"></span> RunNorway</p>
      <p><a class="underline" href="mailto:post@runnorway.no">post@runnorway.no</a></p>
    </div>
  </footer>

  <!-- Libraries -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- App JS -->
  <script>
    // Nedtelling – sett dato til et hovedløp (YYYY-MM-DD)
    const target = new Date("2026-05-10T09:00:00+02:00"); // endre til ditt flaggskip-løp
    function tick(){
      const now = new Date();
      let diff = Math.max(0, target - now);
      const d = Math.floor(diff/86400000); diff-=d*86400000;
      const h = Math.floor(diff/3600000); diff-=h*3600000;
      const m = Math.floor(diff/60000); diff-=m*60000;
      const s = Math.floor(diff/1000);
      document.getElementById("d").textContent=d;
      document.getElementById("h").textContent=h;
      document.getElementById("m").textContent=m;
      document.getElementById("s").textContent=s;
    }
    tick(); setInterval(tick, 1000);

    // Demo-arrangementer (bytt ut med arrangementer.json senere)
    const events = [
      { title:"Oslo City 10K", date:"2026-05-10", location:"Oslo", region:"Oslo", img:"https://images.unsplash.com/photo-1541963694-3f4e68f1b7a1?q=80&w=1200&auto=format&fit=crop", signup:"#"},
      { title:"Bergen City Half", date:"2026-06-07", location:"Bergen", region:"Vestland", img:"https://images.unsplash.com/photo-1552674605-db6ffd4facb0?q=80&w=1200&auto=format&fit=crop", signup:"#"},
      { title:"Trondheim Trail", date:"2026-06-21", location:"Trondheim", region:"Trøndelag", img:"https://images.unsplash.com/photo-1520975922203-b85e66f2aa64?q=80&w=1200&auto=format&fit=crop", signup:"#"},
    ];

    const regions = new Set(events.map(e=>e.region).filter(Boolean));
    const regionSel = document.getElementById('region');
    regions.forEach(r => {
      const o=document.createElement('option'); o.value=r; o.textContent=r; regionSel.appendChild(o);
    });

    function renderEvents(){
      const q = (document.getElementById('q')?.value || '').toLowerCase();
      const region = document.getElementById('region')?.value || '';
      const grid = document.getElementById('eventsGrid');
      const empty = document.getElementById('eventsEmpty');
      grid.innerHTML='';

      let list = events.slice();
      if(q) list = list.filter(e => (e.title+' '+e.location).toLowerCase().includes(q));
      if(region) list = list.filter(e => e.region===region);

      if(list.length===0){ empty.classList.remove('hidden'); return; } else empty.classList.add('hidden');

      list.forEach(e=>{
        const card = document.createElement('article');
        card.className = 'card overflow-hidden';
        card.innerHTML = `
          <img src="${e.img}" alt="${e.title}" class="h-44 w-full object-cover"/>
          <div class="p-5">
            <div class="text-xs uppercase tracking-wide text-slate-500">${e.region||''}</div>
            <h3 class="text-xl font-bold text-[var(--brand)] mt-1">${e.title}</h3>
            <p class="text-slate-600 mt-1">${new Date(e.date).toLocaleDateString('no-NO')} • ${e.location}</p>
            <div class="mt-3 flex gap-3">
              <a class="btn-accent rounded-full px-4 py-2 font-semibold" href="${e.signup}">Meld deg på</a>
              <button class="rounded-full px-4 py-2 border font-semibold" onclick="openWeather('${e.location}')">Se vær</button>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    document.getElementById('q')?.addEventListener('input', renderEvents);
    document.getElementById('region')?.addEventListener('change', renderEvents);
    document.getElementById('reset')?.addEventListener('click', ()=>{
      if(document.getElementById('q')) document.getElementById('q').value='';
      if(document.getElementById('region')) document.getElementById('region').value='';
      renderEvents();
    });
    renderEvents();

    // Pent-vær i ny fane
    function openWeather(location){
      const city = encodeURIComponent(location.split(',')[0].trim());
      window.open(`https://www.pent.no/${city}`, '_blank', 'noopener');
    }

    // Kart
    const map = L.map('map');
    const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
      {maxZoom:19, attribution:'© OpenStreetMap'}).addTo(map);

    const geodb = {
      'Oslo':[59.9139,10.7522],
      'Bergen':[60.39299,5.32415],
      'Trondheim':[63.4305,10.3951]
    };

    const pts = [];
    events.forEach(e=>{
      const k = e.location.split(',')[0].trim();
      const ll = geodb[k];
      if(!ll) return;
      pts.push(ll);
      L.marker(ll).addTo(map).bindPopup(`<strong>${e.title}</strong><br>${new Date(e.date).toLocaleDateString('no-NO')} • ${e.location}`);
    });
    if(pts.length){ map.fitBounds(L.latLngBounds(pts), {padding:[30,30]}); } else { map.setView([64.5,11.5], 4); }

    // Footerår
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
